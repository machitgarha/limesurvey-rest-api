response:
  required:
    - answers
  submit_time:
    allOf:
      - $ref: "./types.yaml#/date_time"
      - description: Submission time; defaults to current server time
  start_time:
    allOf:
      - $ref: "./types.yaml#/date_time"
      - description: The time responding has been started; defaults to current server time
  end_time:
    allOf:
      - $ref: "./types.yaml#/date_time"
      - description: The time responder did the last action; defaults to current server time

  answers:
    type: object
    description: Mappings of question IDs to the answers
    additionalProperties:
      oneOf:
        - type: 'null'
          description: >
            If the question's mandatory property set to No or Soft, giving a null value means the
            question was leaved unanswered.

        - type: integer
          description: Specific to '5 point choice' question type. Zero means no answer.
          minimum: 1
          maximum: 5

        - type: string
          description: |
            The answer code (not the value). Specific to following question types:

            - Bootstrap options (buttons)
            - Bootstrap dropdown
            - Image select list (radio)
            - List (radio)
            - List (dropdown)
            - Short free text
            - Long free text
            - Huge free text
            - Language switch
            - Yes/no
            - Gender

        - type: object
          description: Specific to 'List with comment' question type
          properties:
            code:
              $ref: "./answer.yaml#/answer_code"
            comment:
              type: string

        - type: object
          description: |
            Mapping of each subquestion code to its answer. Specific to following question types:

            - Array, 5 point choice
            - Array, 10 point choice
            - Array, Increase/Same/Decrease
            - Array, Yes/No/Uncertain
            - Array, using flexible labels
            - Array, dual scale

          additionalProperties:
            oneOf:
              - type: 'null'
                description: >
                  If the question's mandatory property set to No or Soft, giving a null value means
                  the question was leaved unanswered.

              - type: integer
                description: Specific to 'Array, 5 point choice' question type
                minimum: 1
                maximum: 5

              - type: integer
                description: Specific to 'Array, 10 point choice' question type
                minimum: 1
                maximum: 10

              - type: string
                description: Specific to 'Array, Increase/Same/Decrease' question type
                minLength: 1
                maxLength: 1
                enum:
                  - I
                  - S
                  - D

              - type: string
                description: Specific to 'Array, Yes/No/Uncertain' question type
                minLength: 1
                maxLength: 1
                enum:
                  - Y
                  - N
                  - U

              - allOf:
                  - $ref: "./answer.yaml#/answer_code"
                  - description: >
                      The answer code; specific to 'Array, using flexible labels' question type

              - type: array
                description: >
                  A pair of answer codes; specific to 'Array, dual scale' question type
                minItems: 2
                maxItems: 2
                items:
                  $ref: "./answer.yaml#/answer_code"
