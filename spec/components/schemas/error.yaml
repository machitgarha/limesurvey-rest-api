error_base:
  type: object
  required:
    - id
  properties:
    id:
      type: string

error_optional_message:
  type: object
  properties:
    message:
      type: string

error_list_base:
  type: object
  required: [errors]
  properties:
    errors:
      type: array
      minItems: 1

error_list_base_with_one_item:
  allOf:
    - $ref: "#/error_list_base"
    - properties:
        errors:
          maxItems: 1
          items:
            $ref: "#/error_base"

api_version_missing_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - ApiVersionMissing

bad_request_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            allOf:
              - $ref: "#/error_optional_message"
              - properties:
                  id:
                    enum:
                      - MalformedRequestBody
                      - InvalidPathParameter
                      - RequiredKeyMissing
                      - TypeMismatch
                      - InvalidValue

internal_server_error_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - InternalServerError

invalid_credentials_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - InvalidCredentials

maintenance_mode_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - MaintenanceMode

method_not_allowed_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - MethodNotAllowed

not_implemented_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - NotImplemented

path_not_found_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - PathNotFound
                  - ApiVersionNotFound

permission_denied_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - PermissionDenied

resource_not_found_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - $ref: "#/error_optional_message"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - ResourceIdNotFound

survey_not_active_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - SurveyNotActive

survey_out_of_time_range_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - SurveyNotStarted
                  - SurveyExpired

too_many_authentication_failures_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - TooManyAuthenticationFailures

unauthorized_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - AccessTokenExpired
                  - AccessTokenInvalid
                  - AuthorizationHeaderMissing
                  - AuthorizationHeaderUnsupported

unprocessable_response_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - required: [question_id]
      properties:
        errors:
          items:
            allOf:
              - $ref: "#/error_optional_message"
              - properties:
                  question_id:
                    type: integer
              - oneOf:
                - title: mandatory_question_missing
                  properties:
                    id:
                      enum:
                        - MandatoryQuestionMissing
                - title: invalid_answer
                  required: [message]
                  properties:
                    id:
                      enum:
                        - InvalidAnswer
                    message:
                      description: Localized message of the error

unsupported_media_type_list:
  allOf:
    - $ref: "#/error_list_base_with_one_item"
    - properties:
        errors:
          items:
            properties:
              id:
                enum:
                  - UnsupportedMediaType
